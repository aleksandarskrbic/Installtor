package configurator.gui.dialog;

import java.awt.BorderLayout;
import java.awt.Dimension;

import javax.swing.ImageIcon;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;

import configurator.Constants;
import configurator.controller.EscapeDispose;
import localization.LanguageManager;

public class AboutDialog extends EscapeDispose {

	private JPanel aboutPanel;
	private JPanel versionPanel;
	private JPanel teamPanel;
	private JPanel statusbar;
	private JTabbedPane tabbedPane;

	public AboutDialog(JFrame parent) {
		super(parent, true);

		setTitle(LanguageManager.getInstance().getRes().getString("about"));
		setSize(new Dimension(690, 400));
		setIconImage(new ImageIcon("images/about.png").getImage());
		setLocationRelativeTo(parent);
		setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
		//disposeOnEscape();
		setLayout(new BorderLayout());
		init();
		groupComponents();
	}

	private void init() {
		aboutPanel = new JPanel(new BorderLayout());
		versionPanel = new JPanel(new BorderLayout());
		teamPanel = new JPanel(new BorderLayout());
		tabbedPane = new JTabbedPane();
		statusbar = new JPanel();

		JLabel txt = new JLabel("Copyright(C) 2017 Tim9.1. " + LanguageManager.getInstance().getRes().getString("all_rr"));
		statusbar.add(txt);

		ImageIcon img = new ImageIcon("images/logo.png");
		JLabel imgLabel = new JLabel("", img, JLabel.CENTER);
		aboutPanel.add(imgLabel, BorderLayout.CENTER);

		DefaultMutableTreeNode rootTeam = new DefaultMutableTreeNode(
				LanguageManager.getInstance().getRes().getString("team") + "9.1");
		createNodesTeam(rootTeam);
		JTree treeTeam = new JTree(rootTeam);
		teamPanel.add(treeTeam, BorderLayout.CENTER);

		img = new ImageIcon("images/logo_version.resized.png");
		imgLabel = new JLabel("", img, JLabel.CENTER);
		versionPanel.add(imgLabel, BorderLayout.CENTER);

		DefaultMutableTreeNode rootVersion = new DefaultMutableTreeNode(
				LanguageManager.getInstance().getRes().getString("versions"));
		createNodesVersion(rootVersion);
		JTree treeVersion = new JTree(rootVersion);
		versionPanel.add(treeVersion, BorderLayout.WEST);

	}

	private void groupComponents() {
		tabbedPane.add(LanguageManager.getInstance().getRes().getString("logo"), aboutPanel);
		tabbedPane.add(LanguageManager.getInstance().getRes().getString("versions"), versionPanel);
		tabbedPane.add(LanguageManager.getInstance().getRes().getString("team"), teamPanel);

		add(tabbedPane, BorderLayout.CENTER);
		add(statusbar, BorderLayout.SOUTH);
	}

	private void createNodesTeam(DefaultMutableTreeNode root) {
		DefaultMutableTreeNode teamLead = new DefaultMutableTreeNode(
				LanguageManager.getInstance().getRes().getString("team_lead"));
		DefaultMutableTreeNode teamMembers = new DefaultMutableTreeNode(
				LanguageManager.getInstance().getRes().getString("team_member"));

		teamLead.add(new DefaultMutableTreeNode("Pavle Jankovic"));
		root.add(teamLead);
		teamMembers.add(new DefaultMutableTreeNode("Aleksandar Vujasinovic"));
		teamMembers.add(new DefaultMutableTreeNode("Aleksandar Skrbic"));
		teamMembers.add(new DefaultMutableTreeNode("Nemanja Simic"));
		root.add(teamMembers);
	}

	private void createNodesVersion(DefaultMutableTreeNode root) {
		DefaultMutableTreeNode ui = new DefaultMutableTreeNode(LanguageManager.getInstance().getRes().getString("ui"));
		DefaultMutableTreeNode os = new DefaultMutableTreeNode(LanguageManager.getInstance().getRes().getString("os"));
		DefaultMutableTreeNode java = new DefaultMutableTreeNode(LanguageManager.getInstance().getRes().getString("java_v"));

		ui.add(new DefaultMutableTreeNode(Constants.PROGRAM_VERSION));
		root.add(ui);
		os.add(new DefaultMutableTreeNode(System.getProperty("os.name")));
		root.add(os);
		java.add(new DefaultMutableTreeNode(System.getProperty("java.version")));
		root.add(java);
	}

}
